[![返回目录](https://i.postimg.cc/WzXsh0MX/image.png)](https://parg.co/UdT)

# 缓存

在互联网领域, 流行着这么一句话:90%的流量由 10%的内容产生。缓存也由此产生: 只为最频繁访问的 10%的内容提供更快的存储, 就可以以很低的成本提供尽可能好的服务质量。一般符合这种互联网访问模型的曲线是下图这样的. 对每个访问的 url 做独立计数, 并按照从访问最多到最低排序：

![访问量排序](https://s2.ax1x.com/2019/11/18/M6rRTx.png)

缓存是软件系统中常见的组成部分，其能够提升系统的请求处理与响应能力，避免重复地处理，快速返回常见的数据：

![缓存知识体系](https://i.postimg.cc/Tw8DdwYZ/image.png)

# 背景分析

## 功能与分类

![一个可能的组合使用多个组件的数据系统架构](https://s2.ax1x.com/2020/02/02/1YgnII.md.png)

缓存系统的主要功能常常有：

- 数据库缓存：作为数据库与 DAO 层之间的中间缓存，降低对后端数据库的访问压力，高速缓存能使得访问速度达到 1ms 级别，例如高频率的数据库查询。

- 临时数据存储：应用程序需要维护大量临时数据，将临时数据存储在缓存系统中，可以降低内存管理的开销，改进应用程序工作负载。例如：在分布式系统中，同一个用户的不同请求可能会发送到不同的服务器上，这时可以用缓存作为全局存储，用于保存 Session 数据、用户的 Token、权限信息等数据。

- 部分数据的持久化存储：此时类似于传统的数据库，将数据存入磁盘中做持久化存储，例如广告推荐类需要离线计算大量数据以及榜单的生成。

我们往往会从系统层、应用层、网络层、用户层等不同的维度去提高缓存机制与策略。客户端缓存也被称为“浏览器缓存”，下载数据的客户端，浏览器，应用程序，其他服务等可以跟踪下载的内容，如果该数据有任何过期时间，则 ETag 为最后一个请求允许条件、请求数据是否已更改等。网络层缓存中，类似于 [Varnish](https://www.varnish-cache.org/) 或 [Squid](http://www.squid-cache.org/) 拦截看起来相同的请求（基于各种可配置标准），尽早直接从内存中返回响应，而不是点击应用程序服务器。这允许应用服务器花费更多时间处理其他流量。应用层缓存则是 Memcache，Redis 等软件可以在您的应用程序中实现，以缓存数据存储查询等各种内容，这样可以更快地生成响应。

# 链接

- https://mp.weixin.qq.com/s/jdOVzGTyi_6mgK7Gkr4yMA
- https://www.zhihu.com/question/319817091/answer/653985863
- https://zhuanlan.zhihu.com/p/70597595
- https://zhuanlan.zhihu.com/p/72671938 Redis 与 Mysql 双写一致性方案解析
- https://zhuanlan.zhihu.com/p/91770135 如何保障 mysql 和 redis 之间的数据一致性？
- https://zhuanlan.zhihu.com/p/74880843

- https://www.zhihu.com/question/26190832/answer/825301105 Cache 和 Buffer 都是缓存，主要区别是什么？
